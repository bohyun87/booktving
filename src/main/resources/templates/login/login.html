<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout1}">
<th:block layout:fragment="css">
	<link rel="stylesheet" type="text/css" href="/css/login.css" />
	<style>
</style>
</th:block>
<div layout:fragment="content">
	<!-- <div>
		<img class="backgroung-img" src="/images/login.jpg">
	</div> -->
	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
				<form class="login100-form validate-form" action="/login"
					method="post">
					<span class="login100-form-title p-b-26"> 환영합니다 </span> <span
						class="login100-form-title p-b-48"> <i
						class="zmdi zmdi-font"></i>
					</span>
					<div class="wrap-input100 validate-input"
						data-validate="Valid email is: a@b.c">
						<label th:for="userid" class="focus-input100"></label> <input
							class="input100" type="text" id="userId" name="userId"
							placeholder="ID">
					</div>
					<div class="wrap-input100 validate-input"
						data-validate="Enter password">
						<label th:for="password" class="btn-show-pass"> </label> <input
							class="input100" type="password" id="password" name="password"
							placeholder="PW">
					</div>
					<div class="container-login100-form-btn">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button class="login100-form-btn" type="submit" id="loginbtn">Login</button>
						</div>
						<p th:if="${loginErrorMsg}" class="error"
							th:text="${loginErrorMsg}"></p>
						<div style="display: block; margin-right:  200px ">
							<label><input type="checkbox" name="id_save"
								id="id_save" />ID 기억</label> <label for="remember-me"><span><input
									type="checkbox" name="remember-me"></span> 자동 로그인 </label>
						</div>
					</div>
					<div class="text-center p-t-115" style="padding-top:50px">
						<span class="txt1"> 회원이 아니세요? </span> <a class="txt2"
							href="/login/new"> 회원가입 </a>

					</div>
					<div class="findId">

						<button>
							<a href="/findid" style="color: black;">ID찾기</a>
						</button>

						<button>
							<a href="/findpw" style="color: black;">PW찾기</a>
						</button>
					</div>
					<input type="hidden" th:name="${_csrf.parameterName}"
						th:value="${_csrf.token}">

				</form>
			</div>
		</div>
	</div>
</div>
<th:block layout:fragment="script">
	<script type="text/javascript" th:src="@{/js/cookie.js}"></script>
	<script th:inline="javascript">
		$(document).ready(function() {
			var userInputId = getCookie("userInputId");
			var setCookieYN = getCookie("setCookieYN");
			var rememberMe = getCookie("remember-me");
			if (rememberMe != null) {
				$("#remember-me").prop("checked", true);
				location.href = "/";
			}
			if ($("#remember-me").is(":unchecked")) {
				deleteCookie("remember-me");
			}

			if (setCookieYN === 'Y') {
				$("#id_save").prop("checked", true);
				$("#userId").val(userInputId);
			} else {
				$("#id_save").prop("checked", false);
			}

			$('#loginbtn').click(function() {
				if ($("#id_save").is(":checked")) {
					var userInputId = $("#userId").val();
					setCookie("userInputId", userInputId, 60);
					setCookie("setCookieYN", "Y", 60);
					console.log("생성");
				} else {
					deleteCookie("userInputId");
					deleteCookie("setCookieYN");
					console.log("삭제");
				}
			});

			var loginErrorMsg = /*[[${loginErrorMsg}]]*/null;
			if (loginErrorMsg !== null) {
				alert(loginErrorMsg);
			}
		});

		/* //쿠키값 Set
		function setCookie(cookieName, value, exdays) {
			var exdate = new Date();
			exdate.setDate(exdate.getDate() + exdays);
			var cookieValue = escape(value)
					+ ((exdays == null) ? "" : "; expires="
							+ exdate.toGMTString());
			document.cookie = cookieName + "=" + cookieValue;
		}

		//쿠키값 Delete
		function deleteCookie(cookieName) {
			var expireDate = new Date();
			expireDate.setDate(expireDate.getDate() - 1);
			document.cookie = cookieName + "= " + "; expires="
					+ expireDate.toGMTString();
		}

		//쿠키값 가져오기
		function getCookie(cookie_name) {
			var x, y;
			var val = document.cookie.split(';');

			for (var i = 0; i < val.length; i++) {
				x = val[i].substr(0, val[i].indexOf('='));
				y = val[i].substr(val[i].indexOf('=') + 1);
				x = x.replace(/^\s+|\s+$/g, ''); // 앞과 뒤의 공백 제거하기

				if (x == cookie_name) {
					return unescape(y); // unescape로 디코딩 후 값 리턴
				}
			}
		} */
	</script>

</th:block>
</html>